<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI CV Analyzer - Agent CV</title>
    
    <!-- Import t·∫•t c·∫£ c√°c module ch·∫•m ƒëi·ªÉm -->
    <script src="scoring/keywordMatching.js"></script>
    <script src="scoring/skillScorer.js"></script>
    <script src="scoring/experienceScorer.js"></script>
    <script src="scoring/formattingScorer.js"></script>
    <script src="scoring/educationScorer.js"></script>
    <script src="scoring/cvScorer.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #2d2d2d 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #00d4aa, #00b4d8, #0077b6);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: #b0b0b0;
        }

        .main-content {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        .upload-section, .analysis-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .upload-section:hover, .analysis-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 212, 170, 0.1);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #00d4aa;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .upload-area {
            border: 2px dashed #00d4aa;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(0, 212, 170, 0.05);
        }

        .upload-area:hover {
            border-color: #00b4d8;
            background: rgba(0, 180, 216, 0.1);
        }

        .upload-area.dragover {
            border-color: #0077b6;
            background: rgba(0, 119, 182, 0.15);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            color: #00d4aa;
            margin-bottom: 15px;
        }

        .file-input {
            display: none;
        }

        .upload-text {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .file-types {
            font-size: 0.9rem;
            color: #b0b0b0;
        }

        .btn {
            background: linear-gradient(45deg, #00d4aa, #00b4d8);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 212, 170, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .feature-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 212, 170, 0.3);
            color: #ffffff;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .feature-btn:hover, .feature-btn.active {
            background: linear-gradient(45deg, #00d4aa, #00b4d8);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 212, 170, 0.2);
        }

        .analysis-result {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #00d4aa;
            /* Removed height restriction for full display */
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid #00d4aa;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #00b4d8);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .score-card {
            background: linear-gradient(45deg, rgba(0, 212, 170, 0.1), rgba(0, 180, 216, 0.1));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid rgba(0, 212, 170, 0.3);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4aa, #00b4d8);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Styles cho k·∫øt qu·∫£ ch·∫•m ƒëi·ªÉm chi ti·∫øt */
        .detailed-score-container {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }

        .score-overview {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 180, 216, 0.1));
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(0, 212, 170, 0.3);
            text-align: center;
        }

        .final-score {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4aa, #00b4d8);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-grade {
            font-size: 1.5rem;
            color: #00d4aa;
            margin-bottom: 15px;
        }

        .score-description {
            color: #b8b8b8;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .category-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .category-score-item {
            background: rgba(26, 26, 26, 0.8);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .category-score-item:hover {
            border-color: rgba(0, 212, 170, 0.5);
            transform: translateY(-2px);
        }

        .category-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #00d4aa;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-score {
            font-size: 2rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .category-level {
            color: #b8b8b8;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .score-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #00b4d8);
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .recommendations-section {
            background: rgba(26, 26, 26, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .recommendations-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #00d4aa;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendation-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .recommendation-tab {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .recommendation-tab.active {
            background: linear-gradient(45deg, #00d4aa, #00b4d8);
            border-color: transparent;
            color: #000;
        }

        .recommendation-content {
            display: none;
        }

        .recommendation-content.active {
            display: block;
        }

        .recommendation-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #00d4aa;
        }

        .recommendation-category {
            font-weight: 600;
            color: #00b4d8;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .recommendation-text {
            color: #e0e0e0;
            line-height: 1.5;
        }

        .strengths-weaknesses {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .strength-item, .weakness-item {
            background: rgba(26, 26, 26, 0.8);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .strength-item {
            border-left: 4px solid #00d4aa;
        }

        .weakness-item {
            border-left: 4px solid #ff6b6b;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #00d4aa;
        }

        .weakness-section .section-title {
            color: #ff6b6b;
        }

        .basic-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .info-label {
            color: #b8b8b8;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .info-value {
            color: #ffffff;
            font-weight: 600;
            font-size: 1.1rem;
        }

        @media (max-width: 768px) {
            .strengths-weaknesses {
                grid-template-columns: 1fr;
            }
            
            .category-scores {
                grid-template-columns: 1fr;
            }
            
            .final-score {
                font-size: 3rem;
            }
        }

        .score-label {
            font-size: 1.1rem;
            color: #b0b0b0;
            margin-top: 10px;
        }

        .strengths-weaknesses {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .strength, .weakness {
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid;
        }

        .strength {
            background: rgba(34, 197, 94, 0.1);
            border-color: #22c55e;
        }

        .weakness {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
        }

        .preview-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid rgba(0, 212, 170, 0.3);
        }

        .file-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .file-icon {
            font-size: 2rem;
            color: #00d4aa;
        }

        .file-details {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .file-size {
            color: #b0b0b0;
            font-size: 0.9rem;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.8), transparent);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #fca5a5;
        }

        .success-message {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #86efac;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 8px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(45deg, #00d4aa, #00b4d8);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        /* CV Layout Styles */
        .cv-container {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            font-family: 'Times New Roman', serif;
            line-height: 1.6;
        }

        .cv-header {
            text-align: center;
            border-bottom: 3px solid #00d4aa;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .cv-name {
            font-size: 2.2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cv-title {
            font-size: 1.2rem;
            color: #00d4aa;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .cv-contact {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            color: #555;
        }

        .cv-contact-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .cv-section {
            margin-bottom: 30px;
        }

        .cv-section-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
            border-bottom: 2px solid #00d4aa;
            padding-bottom: 8px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .cv-item {
            margin-bottom: 20px;
            padding-left: 20px;
            border-left: 3px solid #e3f2fd;
        }

        .cv-item-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .cv-item-title {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .cv-item-company {
            color: #00d4aa;
            font-weight: 600;
            margin-top: 3px;
        }

        .cv-item-date {
            color: #666;
            font-style: italic;
            font-size: 0.9rem;
            margin-left: auto;
        }

        .cv-item-description {
            color: #555;
            margin-top: 8px;
        }

        .cv-skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .cv-skill-item {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 8px;
            border-left: 4px solid #00d4aa;
            font-weight: 500;
        }

        .cv-languages {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .cv-language-item {
            background: #e3f2fd;
            padding: 8px 15px;
            border-radius: 20px;
            color: #1976d2;
            font-weight: 500;
        }

        .analysis-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .analysis-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .analysis-card h4 {
            color: #00d4aa;
            margin-bottom: 15px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .score-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(0, 212, 170, 0.3);
        }

        .score-item-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00d4aa;
        }

        .score-item-label {
            font-size: 0.9rem;
            color: #b0b0b0;
            margin-top: 5px;
        }

        .improvements-list {
            list-style: none;
            padding: 0;
        }

        .improvements-list li {
            background: rgba(255, 255, 255, 0.05);
            margin: 10px 0;
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
            position: relative;
        }

        .improvements-list li:before {
            content: "";
            margin-right: 0px;
        }

        .strengths-list {
            list-style: none;
            padding: 0;
        }

        .strengths-list li {
            background: rgba(34, 197, 94, 0.1);
            margin: 10px 0;
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 4px solid #22c55e;
            color: #86efac;
        }

        .strengths-list li:before {
            content: "";
            margin-right: 0px;
        }

        .weaknesses-list {
            list-style: none;
            padding: 0;
        }

        .weaknesses-list li {
            background: rgba(239, 68, 68, 0.1);
            margin: 10px 0;
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 4px solid #ef4444;
            color: #fca5a5;
        }

        .weaknesses-list li:before {
            content: "";
            margin-right: 0px;
        }

        .errors-section {
            background: rgba(239, 68, 68, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #ef4444;
        }

        .error-category {
            margin-bottom: 20px;
        }

        .error-category h4 {
            color: #ef4444;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .error-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            border-left: 3px solid #ef4444;
        }

        .agent-cv-preview {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: #333;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .before-section, .after-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .before-section h4 {
            color: #ef4444;
            margin-bottom: 15px;
        }

        .after-section h4 {
            color: #22c55e;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .cv-contact {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            
            .before-after {
                grid-template-columns: 1fr;
            }
            
            .analysis-grid, .score-breakdown {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI CV Analyzer</h1>
            <p>Ph√¢n t√≠ch CV th√¥ng minh v·ªõi c√¥ng ngh·ªá AI ti√™n ti·∫øn</p>
        </div>

        <div class="main-content">
            <div class="upload-section">
                <h2 class="section-title">
                    üìÑ T·∫£i l√™n CV c·ªßa b·∫°n
                </h2>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üìÅ</div>
                    <div class="upload-text">K√©o th·∫£ file ho·∫∑c click ƒë·ªÉ ch·ªçn</div>
                    <div class="file-types">H·ªó tr·ª£: JPG, PNG, PDF, DOCX</div>
                </div>
                
                <input type="file" id="fileInput" class="file-input" 
                       accept="image/*,.pdf,.doc,.docx" multiple>
                
                <div class="feature-buttons">
                    <button class="feature-btn active" data-mode="score">
                        üìä Ch·∫•m ƒëi·ªÉm CV
                    </button>
                    <button class="feature-btn" data-mode="agent">
                        ü§ñ Agent CV
                    </button>
                    <button class="feature-btn" data-mode="errors">
                        üîç T√¨m l·ªói CV
                    </button>
                    <button class="feature-btn" data-mode="analyze">
                        üìà Ph√¢n t√≠ch to√†n di·ªán
                    </button>
                </div>

                <div id="filePreview"></div>
                
                <button class="btn" id="analyzeBtn" disabled>
                    üöÄ B·∫Øt ƒë·∫ßu ph√¢n t√≠ch
                </button>
            </div>

            <div class="analysis-section">
                <h2 class="section-title">
                    üéØ K·∫øt qu·∫£ ph√¢n t√≠ch
                </h2>
                
                <div id="analysisResult">
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">üìã</div>
                        <h3 style="color: #00d4aa; margin-bottom: 15px;">Ch√†o m·ª´ng ƒë·∫øn v·ªõi AI CV Analyzer</h3>
                        <p style="margin-bottom: 20px;">Ch·ªçn file CV (JPG, PNG, PDF, DOCX) ƒë·ªÉ b·∫Øt ƒë·∫ßu ph√¢n t√≠ch th√¥ng minh</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 25px; color: #999;">
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">üìä</div>
                                <strong>Ch·∫•m ƒëi·ªÉm CV</strong><br>
                                <small>ƒê√°nh gi√° ƒëi·ªÉm s·ªë 0-100</small>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">ü§ñ</div>
                                <strong>Agent CV</strong><br>
                                <small>T·∫°o CV t·ªëi ∆∞u</small>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">üîç</div>
                                <strong>T√¨m l·ªói</strong><br>
                                <small>Ph√°t hi·ªán & s·ª≠a l·ªói</small>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">üìà</div>
                                <strong>Ph√¢n t√≠ch to√†n di·ªán</strong><br>
                                <small>ƒê√°nh gi√° chi ti·∫øt</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Gemini API Configuration
        const GEMINI_API_KEY = 'AIzaSyAyE1md6w95H8gi9nSbYJsk6uqKVvxMPb0';
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';

        // Global variables
        let selectedFiles = [];
        let currentMode = 'score';
        let isAnalyzing = false;

        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const analysisResult = document.getElementById('analysisResult');
        const filePreview = document.getElementById('filePreview');
        const featureButtons = document.querySelectorAll('.feature-btn');

        // Initialize particles background
        function createParticles() {
            const particles = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 4 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particles.appendChild(particle);
            }
        }

        // File upload handlers
        uploadArea.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('dragover', handleDragOver);
        uploadArea.addEventListener('dragleave', handleDragLeave);
        uploadArea.addEventListener('drop', handleDrop);
        fileInput.addEventListener('change', handleFileSelect);

        function handleDragOver(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            processFiles(files);
        }

        function handleFileSelect(e) {
            const files = Array.from(e.target.files);
            processFiles(files);
        }

        function processFiles(files) {
            selectedFiles = files.filter(file => {
                const validTypes = ['image/jpeg', 'image/png', 'image/jpg', 'application/pdf', 
                                   'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                return validTypes.includes(file.type) && file.size <= 10 * 1024 * 1024; // 10MB limit
            });

            if (selectedFiles.length === 0) {
                showError('Vui l√≤ng ch·ªçn file h·ª£p l·ªá (JPG, PNG, PDF, DOCX) v√† nh·ªè h∆°n 10MB');
                return;
            }

            displayFilePreview();
            analyzeBtn.disabled = false;
        }

        function displayFilePreview() {
            filePreview.innerHTML = '';
            
            selectedFiles.forEach((file, index) => {
                const fileInfo = document.createElement('div');
                fileInfo.className = 'file-info';
                
                const fileIcon = getFileIcon(file.type);
                const fileSize = formatFileSize(file.size);
                
                fileInfo.innerHTML = `
                    <div class="file-icon">${fileIcon}</div>
                    <div class="file-details">
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${fileSize}</div>
                    </div>
                `;

                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'preview-image';
                        fileInfo.appendChild(img);
                    };
                    reader.readAsDataURL(file);
                }

                filePreview.appendChild(fileInfo);
            });
        }

        function getFileIcon(fileType) {
            if (fileType.startsWith('image/')) return 'üñºÔ∏è';
            if (fileType === 'application/pdf') return 'üìÑ';
            if (fileType.includes('word')) return 'üìù';
            return 'üìÑ';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Feature mode selection
        featureButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                featureButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.dataset.mode;
            });
        });

        // Analysis function
        analyzeBtn.addEventListener('click', analyzeCV);

        async function analyzeCV() {
            if (isAnalyzing || selectedFiles.length === 0) return;

            isAnalyzing = true;
            analyzeBtn.disabled = true;
            showLoading();

            try {
                if (currentMode === 'score') {
                    // S·ª≠ d·ª•ng h·ªá th·ªëng ch·∫•m ƒëi·ªÉm m·ªõi
                    await analyzeWithAdvancedScoring();
                } else {
                    // S·ª≠ d·ª•ng Gemini AI cho c√°c ch·ª©c nƒÉng kh√°c
                    await analyzeWithGeminiText();
                }
            } catch (error) {
                showError('L·ªói khi ph√¢n t√≠ch CV: ' + error.message);
            } finally {
                isAnalyzing = false;
                analyzeBtn.disabled = false;
            }
        }

        async function analyzeWithAdvancedScoring() {
            const cvScorer = new CVScorer();
            let results = [];

            for (const file of selectedFiles) {
                try {
                    let cvText = '';
                    
                    if (file.type.startsWith('image/')) {
                        // Extract text from image using Gemini
                        const base64 = await fileToBase64(file);
                        const extractPrompt = 'H√£y tr√≠ch xu·∫•t to√†n b·ªô n·ªôi dung text t·ª´ h√¨nh ·∫£nh CV n√†y. Ch·ªâ tr·∫£ v·ªÅ text, kh√¥ng th√™m b√¨nh lu·∫≠n.';
                        cvText = await analyzeWithGeminiAPI(extractPrompt, base64, file.type);
                    } else {
                        // Extract text from PDF/DOCX
                        cvText = await extractTextFromFile(file);
                    }

                    // Get job requirements from user input (if available)
                    const jobRequirements = getJobRequirements();
                    
                    // Score CV using advanced system
                    const scoringResult = await cvScorer.scoreCV(cvText, jobRequirements);
                    
                    results.push({
                        fileName: file.name,
                        scoringResult: scoringResult,
                        originalText: cvText
                    });
                    
                } catch (error) {
                    console.error(`Error analyzing ${file.name}:`, error);
                    results.push({
                        fileName: file.name,
                        error: error.message
                    });
                }
            }

            displayScoringResults(results);
        }

        async function analyzeWithGeminiText() {
            let analysisPrompt = getAnalysisPrompt();
            let results = [];

            for (const file of selectedFiles) {
                if (file.type.startsWith('image/')) {
                    const base64 = await fileToBase64(file);
                    const result = await analyzeWithGeminiAPI(analysisPrompt, base64, file.type);
                    results.push(result);
                } else {
                    // For PDF/DOCX files, we'll use text extraction (simplified approach)
                    const textContent = await extractTextFromFile(file);
                    const result = await analyzeTextWithGemini(analysisPrompt, textContent);
                    results.push(result);
                }
            }

            displayResults(results);
        }

        function getJobRequirements() {
            // Return default requirements since form is removed
            return {
                jobTitle: '',
                jobDescription: '',
                requiredSkills: [],
                minExperience: 0,
                minEducation: '',
                weights: {
                    keyword: 0.25,
                    skill: 0.25,
                    experience: 0.25,
                    education: 0.15,
                    formatting: 0.10
                }
            };
        }

        function displayScoringResults(results) {
            hideLoading();
            const analysisResult = document.getElementById('analysisResult');
            analysisResult.innerHTML = '';

            results.forEach((result, index) => {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'analysis-result';
                
                if (result.error) {
                    resultDiv.innerHTML = `
                        <h3 style="color: #ff6b6b; margin-bottom: 15px;">‚ùå L·ªói ph√¢n t√≠ch: ${result.fileName}</h3>
                        <p style="color: #e0e0e0;">${result.error}</p>
                    `;
                } else {
                    resultDiv.innerHTML = formatAdvancedScoringResult(result.scoringResult, result.fileName);
                }

                if (results.length > 1) {
                    const fileTitle = document.createElement('h2');
                    fileTitle.textContent = `üìÑ ${result.fileName}`;
                    fileTitle.style.color = '#00d4aa';
                    resultDiv.insertBefore(fileTitle, resultDiv.firstChild);
                }
                
                analysisResult.appendChild(resultDiv);
            });
        }

        function getAnalysisPrompt() {
            const prompts = {
                score: `B·∫°n l√† chuy√™n gia HR chuy√™n nghi·ªáp. H√£y ph√¢n t√≠ch CV n√†y theo ƒë·ªãnh d·∫°ng sau:

1. ƒêI·ªÇM S·ªê T·ªîNG TH·ªÇ (0-100 ƒëi·ªÉm)

2. ƒêI·ªÇM S·ªê CHI TI·∫æT:
   a. Th√¥ng tin c√° nh√¢n (0-20 ƒëi·ªÉm)
   b. Kinh nghi·ªám l√†m vi·ªác (0-30 ƒëi·ªÉm)  
   c. K·ªπ nƒÉng chuy√™n m√¥n (0-25 ƒëi·ªÉm)
   d. H·ªçc v·∫•n v√† b·∫±ng c·∫•p (0-15 ƒëi·ªÉm)
   e. ƒê·ªãnh d·∫°ng v√† tr√¨nh b√†y (0-10 ƒëi·ªÉm)

3. ƒêI·ªÇM M·∫†NH N·ªîI B·∫¨T:
   a. [ƒêi·ªÉm m·∫°nh 1]
   b. [ƒêi·ªÉm m·∫°nh 2]
   c. [ƒêi·ªÉm m·∫°nh 3]
   d. [ƒêi·ªÉm m·∫°nh 4] (n·∫øu c√≥)
   e. [ƒêi·ªÉm m·∫°nh 5] (n·∫øu c√≥)

4. ƒêI·ªÇM C·∫¶N C·∫¢I THI·ªÜN:
   a. [ƒêi·ªÉm y·∫øu 1]
   b. [ƒêi·ªÉm y·∫øu 2]
   c. [ƒêi·ªÉm y·∫øu 3]
   d. [ƒêi·ªÉm y·∫øu 4] (n·∫øu c√≥)
   e. [ƒêi·ªÉm y·∫øu 5] (n·∫øu c√≥)

5. ƒê·ªÄ XU·∫§T C·∫¢I THI·ªÜN:
   a. C·∫£i thi·ªán n·ªôi dung
   b. T·ªëi ∆∞u h√≥a t·ª´ kh√≥a
   c. N√¢ng cao tr√¨nh b√†y
   d. B·ªï sung th√¥ng tin
   e. ƒêi·ªÅu ch·ªânh c·∫•u tr√∫c
                
                Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát, tu√¢n th·ªß ch√≠nh x√°c ƒë·ªãnh d·∫°ng tr√™n.`,
                
                agent: `B·∫°n l√† AI Agent CV chuy√™n nghi·ªáp. H√£y t·∫°o CV ƒë∆∞·ª£c c·∫£i thi·ªán theo c·∫•u tr√∫c sau:

1. TH√îNG TIN C√Å NH√ÇN
   a. H·ªç t√™n: [Gi·ªØ nguy√™n]
   b. V·ªã tr√≠ ·ª©ng tuy·ªÉn: [C·∫£i thi·ªán]
   c. Th√¥ng tin li√™n h·ªá: [Gi·ªØ nguy√™n]
   d. M·ª•c ti√™u ngh·ªÅ nghi·ªáp: [Vi·∫øt l·∫°i chuy√™n nghi·ªáp]

2. T√ìM T·∫ÆT CHUY√äN NGHI·ªÜP
   a. ƒêi·ªÉm m·∫°nh c·ªët l√µi
   b. Kinh nghi·ªám n·ªïi b·∫≠t  
   c. Th√†nh t·ª±u ƒë·∫°t ƒë∆∞·ª£c

3. KINH NGHI·ªÜM L√ÄM VI·ªÜC
   [V·ªõi m·ªói c√¥ng vi·ªác]
   a. T√™n c√¥ng ty - V·ªã tr√≠ (Th·ªùi gian)
   b. M√¥ t·∫£ c√¥ng vi·ªác (c·∫£i thi·ªán)
   c. Th√†nh t√≠ch ƒë·∫°t ƒë∆∞·ª£c
   d. K·ªπ nƒÉng s·ª≠ d·ª•ng

4. K·ª∏ NƒÇNG CHUY√äN M√îN
   a. K·ªπ nƒÉng k·ªπ thu·∫≠t
   b. K·ªπ nƒÉng m·ªÅm
   c. Ng√¥n ng·ªØ
   d. Ch·ª©ng ch·ªâ

5. H·ªåC V·∫§N
   a. B·∫±ng c·∫•p ch√≠nh
   b. Kh√≥a h·ªçc b·ªï sung
   c. Ch·ª©ng ch·ªâ ngh·ªÅ nghi·ªáp
                
                Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát, t·∫°o CV ho√†n ch·ªânh theo ƒë·ªãnh d·∫°ng tr√™n.`,
                
                errors: `B·∫°n l√† chuy√™n gia ki·ªÉm duy·ªát CV. H√£y t√¨m l·ªói theo danh m·ª•c sau:

1. L·ªñI CH√çNH T·∫¢ V√Ä NG·ªÆ PH√ÅP:
   a. [L·ªói 1 v√† c√°ch s·ª≠a]
   b. [L·ªói 2 v√† c√°ch s·ª≠a]
   c. [L·ªói 3 v√† c√°ch s·ª≠a]

2. L·ªñI ƒê·ªäNH D·∫†NG V√Ä B·ªê C·ª§C:
   a. [L·ªói ƒë·ªãnh d·∫°ng 1]
   b. [L·ªói ƒë·ªãnh d·∫°ng 2] 
   c. [L·ªói ƒë·ªãnh d·∫°ng 3]

3. TH√îNG TIN THI·∫æU S√ìT:
   a. [Th√¥ng tin c√≤n thi·∫øu 1]
   b. [Th√¥ng tin c√≤n thi·∫øu 2]
   c. [Th√¥ng tin c√≤n thi·∫øu 3]

4. L·ªñI TR√åNH B√ÄY CHUY√äN NGHI·ªÜP:
   a. [L·ªói tr√¨nh b√†y 1]
   b. [L·ªói tr√¨nh b√†y 2]
   c. [L·ªói tr√¨nh b√†y 3]

5. C√ÅCH S·ª¨A CH·ªÆ CHO T·ª™NG L·ªñI:
   a. H∆∞·ªõng d·∫´n s·ª≠a l·ªói 1
   b. H∆∞·ªõng d·∫´n s·ª≠a l·ªói 2
   c. H∆∞·ªõng d·∫´n s·ª≠a l·ªói 3
   d. H∆∞·ªõng d·∫´n s·ª≠a l·ªói 4
   e. H∆∞·ªõng d·∫´n s·ª≠a l·ªói 5
                
                Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát, ph√¢n lo·∫°i l·ªói theo ƒë√∫ng ƒë·ªãnh d·∫°ng.`,
                
                analyze: `B·∫°n l√† chuy√™n gia ph√¢n t√≠ch CV to√†n di·ªán. Ph√¢n t√≠ch theo c·∫•u tr√∫c sau:

1. ƒê√ÅNH GI√Å T·ªîNG QUAN:
   a. ·∫§n t∆∞·ª£ng ƒë·∫ßu ti√™n
   b. ƒêi·ªÉm n·ªïi b·∫≠t nh·∫•t
   c. M·ª©c ƒë·ªô chuy√™n nghi·ªáp
   d. Kh·∫£ nƒÉng c·∫°nh tranh

2. PH√ÇN T√çCH T·ª™NG PH·∫¶N:
   a. Th√¥ng tin c√° nh√¢n (ƒë·ªô ƒë·∫ßy ƒë·ªß, ch√≠nh x√°c)
   b. Kinh nghi·ªám (m·ª©c ƒë·ªô ph√π h·ª£p, thuy·∫øt ph·ª•c)
   c. K·ªπ nƒÉng (ƒëa d·∫°ng, chuy√™n s√¢u)
   d. H·ªçc v·∫•n (li√™n quan, uy t√≠n)
   e. Tr√¨nh b√†y (b·ªë c·ª•c, thi·∫øt k·∫ø)

3. SO S√ÅNH V·ªöI TI√äU CHU·∫®N TH·ªä TR∆Ø·ªúNG:
   a. M·ª©c ƒë·ªô c·∫°nh tranh
   b. ƒêi·ªÉm v∆∞·ª£t tr·ªôi
   c. ƒêi·ªÉm c√≤n y·∫øu
   d. X·∫øp h·∫°ng t·ªïng th·ªÉ

4. D·ª∞ ƒêO√ÅN KH·∫¢ NƒÇNG TUY·ªÇN D·ª§NG:
   a. T·ª∑ l·ªá th√†nh c√¥ng d·ª± ki·∫øn
   b. Lo·∫°i c√¥ng vi·ªác ph√π h·ª£p
   c. M·ª©c l∆∞∆°ng c√≥ th·ªÉ ƒë·∫°t ƒë∆∞·ª£c
   d. C√°c r√†o c·∫£n c√≥ th·ªÉ g·∫∑p

5. L·ªò TR√åNH C·∫¢I THI·ªÜN:
   a. C·∫£i thi·ªán ngay (1-2 tu·∫ßn)
   b. C·∫£i thi·ªán ng·∫Øn h·∫°n (1-3 th√°ng)
   c. C·∫£i thi·ªán d√†i h·∫°n (6-12 th√°ng)
   d. Chi·∫øn l∆∞·ª£c ngh·ªÅ nghi·ªáp

6. G·ª¢I √ù V·ªä TR√ç C√îNG VI·ªÜC PH√ô H·ª¢P:
   a. V·ªã tr√≠ hi·ªán t·∫°i c√≥ th·ªÉ ·ª©ng tuy·ªÉn
   b. V·ªã tr√≠ c·∫ßn c·∫£i thi·ªán th√™m
   c. Ng√†nh ngh·ªÅ n√™n t·∫≠p trung
   d. C√¥ng ty m·ª•c ti√™u
                
                Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát, ph√¢n t√≠ch s√¢u theo ƒë√∫ng c·∫•u tr√∫c tr√™n.`
            };
            
            return prompts[currentMode] || prompts.score;
        }

        async function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => {
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        async function analyzeWithGeminiAPI(prompt, base64Image, mimeType) {
            const requestBody = {
                contents: [{
                    parts: [
                        { text: prompt },
                        {
                            inline_data: {
                                mime_type: mimeType,
                                data: base64Image
                            }
                        }
                    ]
                }],
                generationConfig: {
                    temperature: 0.7,
                    topK: 40,
                    topP: 0.95,
                    maxOutputTokens: 4096,
                }
            };

            const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestBody)
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status} - ${response.statusText}`);
            }

            const data = await response.json();
            
            if (data.candidates && data.candidates[0]?.content?.parts?.[0]?.text) {
                return data.candidates[0].content.parts[0].text;
            } else {
                throw new Error('Kh√¥ng nh·∫≠n ƒë∆∞·ª£c ph·∫£n h·ªìi h·ª£p l·ªá t·ª´ API');
            }
        }

        async function analyzeTextWithGemini(prompt, textContent) {
            const requestBody = {
                contents: [{
                    parts: [{
                        text: `${prompt}\n\nN·ªôi dung CV:\n${textContent}`
                    }]
                }],
                generationConfig: {
                    temperature: 0.7,
                    topK: 40,
                    topP: 0.95,
                    maxOutputTokens: 4096,
                }
            };

            const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestBody)
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status} - ${response.statusText}`);
            }

            const data = await response.json();
            
            if (data.candidates && data.candidates[0]?.content?.parts?.[0]?.text) {
                return data.candidates[0].content.parts[0].text;
            } else {
                throw new Error('Kh√¥ng nh·∫≠n ƒë∆∞·ª£c ph·∫£n h·ªìi h·ª£p l·ªá t·ª´ API');
            }
        }

        async function extractTextFromFile(file) {
            // Simplified text extraction - for production, you'd want to use proper libraries
            return new Promise((resolve) => {
                if (file.type === 'application/pdf') {
                    resolve(`[PDF File: ${file.name}] - Vui l√≤ng s·ª≠ d·ª•ng file ·∫£nh ƒë·ªÉ c√≥ k·∫øt qu·∫£ t·ªët nh·∫•t.`);
                } else {
                    resolve(`[Document File: ${file.name}] - Vui l√≤ng s·ª≠ d·ª•ng file ·∫£nh ƒë·ªÉ c√≥ k·∫øt qu·∫£ t·ªët nh·∫•t.`);
                }
            });
        }

        function displayResults(results) {
            analysisResult.innerHTML = '';
            
            results.forEach((result, index) => {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'analysis-result';
                
                // Format the result based on current mode
                const formattedResult = formatResult(result, currentMode);
                resultDiv.innerHTML = formattedResult;
                
                if (results.length > 1) {
                    const fileTitle = document.createElement('h3');
                    fileTitle.textContent = `üìÑ K·∫øt qu·∫£ file ${index + 1}: ${selectedFiles[index].name}`;
                    fileTitle.style.marginBottom = '15px';
                    fileTitle.style.color = '#00d4aa';
                    resultDiv.insertBefore(fileTitle, resultDiv.firstChild);
                }
                
                analysisResult.appendChild(resultDiv);
            });
        }

        function formatAdvancedScoringResult(scoringResult, fileName) {
            const result = scoringResult;
            
            return `
                <div class="detailed-score-container">
                    <!-- Score Overview -->
                    <div class="score-overview">
                        <div class="final-score">${result.finalScore}</div>
                        <div class="score-grade">X·∫øp h·∫°ng: ${result.grade}</div>
                        <div class="score-description">
                            <strong>${result.analysis.overall.level}</strong><br>
                            ${result.analysis.overall.description}
                        </div>
                        <div style="margin-top: 15px; color: #b8b8b8;">
                            üìä Kh·∫£ nƒÉng c·∫°nh tranh: ${result.analysis.competitiveness.marketPosition}<br>
                            üìà T·ªët h∆°n ${result.analysis.competitiveness.percentile}% CV kh√°c
                        </div>
                    </div>

                    <!-- Basic Info -->
                    <div class="basic-info-section" style="background: rgba(26, 26, 26, 0.8); border-radius: 15px; padding: 25px; margin-top: 20px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h3 style="color: #00d4aa; margin-bottom: 15px;">üìã Th√¥ng tin c∆° b·∫£n</h3>
                        <div class="basic-info-grid">
                            <div class="info-item">
                                <div class="info-label">T√™n ·ª©ng vi√™n</div>
                                <div class="info-value">${result.basicInfo.name}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Email</div>
                                <div class="info-value">${result.basicInfo.email || 'Kh√¥ng c√≥'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">S·ªë t·ª´</div>
                                <div class="info-value">${result.basicInfo.wordCount}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">C√°c ph·∫ßn c√≥ m·∫∑t</div>
                                <div class="info-value">${result.basicInfo.sections.join(', ') || 'Kh√¥ng x√°c ƒë·ªãnh'}</div>
                            </div>
                        </div>
                    </div>

                    <!-- Category Scores -->
                    <div class="category-scores">
                        ${formatCategoryScore('keyword', 'T·ª´ kh√≥a', 'üîë', result.detailedScores.keyword)}
                        ${formatCategoryScore('skill', 'K·ªπ nƒÉng', 'üí°', result.detailedScores.skill)}
                        ${formatCategoryScore('experience', 'Kinh nghi·ªám', 'üëî', result.detailedScores.experience)}
                        ${formatCategoryScore('education', 'H·ªçc v·∫•n', 'üéì', result.detailedScores.education)}
                        ${formatCategoryScore('formatting', 'ƒê·ªãnh d·∫°ng', 'üìù', result.detailedScores.formatting)}
                    </div>

                    <!-- Strengths and Weaknesses -->
                    <div class="strengths-weaknesses">
                        <div class="strength-item">
                            <div class="section-title">‚úÖ ƒêi·ªÉm m·∫°nh</div>
                            ${result.analysis.strengths.length > 0 ? 
                                result.analysis.strengths.map(strength => `
                                    <div style="margin-bottom: 10px;">
                                        <strong style="color: #00d4aa;">${getCategoryDisplayName(strength.category)}</strong> (${strength.score}/100)<br>
                                        <span style="color: #e0e0e0;">${strength.description}</span>
                                    </div>
                                `).join('') : 
                                '<div style="color: #b8b8b8;">C·∫ßn c·∫£i thi·ªán nhi·ªÅu h∆°n ƒë·ªÉ c√≥ ƒëi·ªÉm m·∫°nh n·ªïi b·∫≠t</div>'
                            }
                        </div>
                        
                        <div class="weakness-item">
                            <div class="section-title">‚ö†Ô∏è ƒêi·ªÉm c·∫ßn c·∫£i thi·ªán</div>
                            ${result.analysis.weaknesses.length > 0 ? 
                                result.analysis.weaknesses.map(weakness => `
                                    <div style="margin-bottom: 10px;">
                                        <strong style="color: #ff6b6b;">${getCategoryDisplayName(weakness.category)}</strong> (${weakness.score}/100)<br>
                                        <span style="color: #e0e0e0;">${weakness.description}</span><br>
                                        <small style="color: #b8b8b8;">ƒê·ªô ∆∞u ti√™n: ${weakness.priority}</small>
                                    </div>
                                `).join('') : 
                                '<div style="color: #b8b8b8;">CV c√≥ ch·∫•t l∆∞·ª£ng t·ªët, kh√¥ng c√≥ ƒëi·ªÉm y·∫øu n·ªïi b·∫≠t</div>'
                            }
                        </div>
                    </div>

                    <!-- Recommendations -->
                    <div class="recommendations-section">
                        <div class="recommendations-title">üí° ƒê·ªÅ xu·∫•t c·∫£i thi·ªán</div>
                        
                        <div class="recommendation-tabs">
                            <div class="recommendation-tab active" onclick="showRecommendationTab(this, 'priority')">∆Øu ti√™n cao</div>
                            <div class="recommendation-tab" onclick="showRecommendationTab(this, 'immediate')">Ngay l·∫≠p t·ª©c</div>
                            <div class="recommendation-tab" onclick="showRecommendationTab(this, 'shortTerm')">Ng·∫Øn h·∫°n</div>
                            <div class="recommendation-tab" onclick="showRecommendationTab(this, 'longTerm')">D√†i h·∫°n</div>
                        </div>
                        
                        <div class="recommendation-content active" data-tab="priority">
                            ${result.recommendations.priority.length > 0 ? 
                                result.recommendations.priority.map(rec => `
                                    <div class="recommendation-item">
                                        <div class="recommendation-category">${getCategoryDisplayName(rec.category)} - ${rec.urgency}</div>
                                        <div class="recommendation-text">${rec.issue}</div>
                                    </div>
                                `).join('') : 
                                '<div class="recommendation-item"><div class="recommendation-text">CV c√≥ ch·∫•t l∆∞·ª£ng t·ªët, kh√¥ng c√≥ v·∫•n ƒë·ªÅ ∆∞u ti√™n cao</div></div>'
                            }
                        </div>
                        
                        <div class="recommendation-content" data-tab="immediate">
                            ${result.recommendations.immediate.length > 0 ? 
                                result.recommendations.immediate.map(rec => `
                                    <div class="recommendation-item">
                                        <div class="recommendation-category">${getCategoryDisplayName(rec.category)}</div>
                                        <div class="recommendation-text">${rec.recommendation}</div>
                                    </div>
                                `).join('') : 
                                '<div class="recommendation-item"><div class="recommendation-text">Kh√¥ng c√≥ ƒë·ªÅ xu·∫•t c·∫ßn th·ª±c hi·ªán ngay</div></div>'
                            }
                        </div>
                        
                        <div class="recommendation-content" data-tab="shortTerm">
                            ${result.recommendations.shortTerm.length > 0 ? 
                                result.recommendations.shortTerm.map(rec => `
                                    <div class="recommendation-item">
                                        <div class="recommendation-category">${getCategoryDisplayName(rec.category)}</div>
                                        <div class="recommendation-text">${rec.recommendation}</div>
                                    </div>
                                `).join('') : 
                                '<div class="recommendation-item"><div class="recommendation-text">Kh√¥ng c√≥ ƒë·ªÅ xu·∫•t ng·∫Øn h·∫°n</div></div>'
                            }
                        </div>
                        
                        <div class="recommendation-content" data-tab="longTerm">
                            ${result.recommendations.longTerm.length > 0 ? 
                                result.recommendations.longTerm.map(rec => `
                                    <div class="recommendation-item">
                                        <div class="recommendation-category">${getCategoryDisplayName(rec.category)}</div>
                                        <div class="recommendation-text">${rec.recommendation}</div>
                                    </div>
                                `).join('') : 
                                '<div class="recommendation-item"><div class="recommendation-text">Kh√¥ng c√≥ ƒë·ªÅ xu·∫•t d√†i h·∫°n</div></div>'
                            }
                        </div>
                    </div>

                    <!-- Improvement Potential -->
                    ${result.analysis.improvementPotential.length > 0 ? `
                        <div style="background: rgba(26, 26, 26, 0.8); border-radius: 15px; padding: 25px; margin-top: 20px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <h3 style="color: #00d4aa; margin-bottom: 15px;">üìà Ti·ªÅm nƒÉng c·∫£i thi·ªán</h3>
                            ${result.analysis.improvementPotential.map(improvement => `
                                <div style="background: rgba(255, 255, 255, 0.05); border-radius: 8px; padding: 15px; margin-bottom: 10px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                        <strong style="color: #00b4d8;">${getCategoryDisplayName(improvement.category)}</strong>
                                        <span style="color: #00d4aa;">+${improvement.impactOnFinalScore} ƒëi·ªÉm</span>
                                    </div>
                                    <div style="color: #b8b8b8; font-size: 0.9rem;">
                                        Hi·ªán t·∫°i: ${improvement.currentScore}/100 | 
                                        Ti·ªÅm nƒÉng: +${improvement.potentialIncrease} ƒëi·ªÉm | 
                                        ƒê·ªô kh√≥: ${improvement.effort} | 
                                        ∆Øu ti√™n: ${improvement.priority}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function formatCategoryScore(category, displayName, icon, scoreData) {
            const score = scoreData.score || 0;
            const level = getScoreLevel(score);
            
            return `
                <div class="category-score-item">
                    <div class="category-title">${icon} ${displayName}</div>
                    <div class="category-score">${Math.round(score)}</div>
                    <div class="category-level">${level}</div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: ${score}%"></div>
                    </div>
                    <div style="color: #b8b8b8; font-size: 0.8rem; margin-top: 5px;">
                        ${scoreData.recommendations?.slice(0, 2).join('. ') || 'Kh√¥ng c√≥ ƒë·ªÅ xu·∫•t c·ª• th·ªÉ'}
                    </div>
                </div>
            `;
        }

        function getCategoryDisplayName(category) {
            const names = {
                keyword: 'T·ª´ kh√≥a',
                skill: 'K·ªπ nƒÉng', 
                experience: 'Kinh nghi·ªám',
                education: 'H·ªçc v·∫•n',
                formatting: 'ƒê·ªãnh d·∫°ng'
            };
            return names[category] || category;
        }

        function getScoreLevel(score) {
            if (score >= 85) return 'Xu·∫•t s·∫Øc';
            if (score >= 70) return 'T·ªët';
            if (score >= 55) return 'Trung b√¨nh';
            if (score >= 40) return 'Y·∫øu';
            return 'R·∫•t y·∫øu';
        }

        function showRecommendationTab(tabElement, tabName) {
            // Remove active class from all tabs and contents
            document.querySelectorAll('.recommendation-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.recommendation-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to clicked tab
            tabElement.classList.add('active');
            
            // Show corresponding content
            const content = document.querySelector(`[data-tab="${tabName}"]`);
            if (content) {
                content.classList.add('active');
            }
        }

        function formatResult(result, mode) {
            // Enhanced formatting based on mode
            if (mode === 'score') {
                return formatScoreResult(result);
            } else if (mode === 'agent') {
                return formatAgentResult(result);
            } else if (mode === 'errors') {
                return formatErrorResult(result);
            } else {
                return formatGeneralResult(result);
            }
        }

        function formatScoreResult(result) {
            // Parse the result to extract structured information
            const lines = result.split('\n');
            let score = null;
            let strengths = [];
            let weaknesses = [];
            let improvements = [];
            let sections = {};
            
            // Extract score
            const scoreMatch = result.match(/(\d+(?:\.\d+)?)[\/\s]*(?:100|ƒëi·ªÉm)/i);
            score = scoreMatch ? parseFloat(scoreMatch[1]) : null;
            
            // Extract sections
            let currentSection = '';
            for (let line of lines) {
                if (line.includes('ƒëi·ªÉm m·∫°nh') || line.includes('ƒêi·ªÉm m·∫°nh')) {
                    currentSection = 'strengths';
                } else if (line.includes('ƒëi·ªÉm y·∫øu') || line.includes('c·∫ßn c·∫£i thi·ªán') || line.includes('ƒêi·ªÉm y·∫øu')) {
                    currentSection = 'weaknesses';
                } else if (line.includes('ƒë·ªÅ xu·∫•t') || line.includes('c·∫£i thi·ªán') || line.includes('ƒê·ªÅ xu·∫•t')) {
                    currentSection = 'improvements';
                } else if (line.trim() && currentSection) {
                    const cleanLine = line.replace(/^\d+\.?\s*/, '').replace(/^[-*]\s*/, '').trim();
                    if (cleanLine) {
                        if (currentSection === 'strengths') strengths.push(cleanLine);
                        else if (currentSection === 'weaknesses') weaknesses.push(cleanLine);
                        else if (currentSection === 'improvements') improvements.push(cleanLine);
                    }
                }
            }
            
            let formatted = '';
            
            // Score card
            if (score !== null) {
                formatted += `
                    <div class="score-card">
                        <div class="score-value">${score}/100</div>
                        <div class="score-label">ƒêi·ªÉm t·ªïng th·ªÉ CV</div>
                    </div>
                `;
            }
            
            // Analysis summary
            formatted += `
                <div class="analysis-summary">
                    <h3 style="margin-bottom: 20px; text-align: center;">üìä Ph√¢n t√≠ch chi ti·∫øt CV</h3>
                    
                    <div class="analysis-grid">
                        <div class="analysis-card">
                            <h4>üí™ ƒêi·ªÉm m·∫°nh</h4>
                            <ul class="strengths-list">
                                ${strengths.map((item, index) => `<li>${String.fromCharCode(97 + index)}. ${item}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div class="analysis-card">
                            <h4>‚ö†Ô∏è ƒêi·ªÉm c·∫ßn c·∫£i thi·ªán</h4>
                            <ul class="weaknesses-list">
                                ${weaknesses.map((item, index) => `<li>${String.fromCharCode(97 + index)}. ${item}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div class="analysis-card">
                            <h4>üí° ƒê·ªÅ xu·∫•t c·∫£i thi·ªán</h4>
                            <ul class="improvements-list">
                                ${improvements.map((item, index) => `<li>${String.fromCharCode(97 + index)}. ${item}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            
            // Full result
            formatted += `
                <div style="background: rgba(0, 0, 0, 0.2); padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h4 style="color: #00d4aa; margin-bottom: 15px;">üìÑ B√°o c√°o chi ti·∫øt</h4>
                    <div style="white-space: pre-line; line-height: 1.6; color: #e0e0e0;">${result}</div>
                </div>
            `;
            
            return formatted;
        }

        function formatAgentResult(result) {
            // Parse CV information from the result
            const lines = result.split('\n');
            let name = 'T√™n ·ª©ng vi√™n';
            let title = 'V·ªã tr√≠ ·ª©ng tuy·ªÉn';
            let contact = {
                phone: '',
                email: '',
                address: ''
            };
            let sections = {
                experience: [],
                education: [],
                skills: [],
                languages: []
            };
            
            // Extract basic info
            for (let i = 0; i < Math.min(10, lines.length); i++) {
                const line = lines[i].trim();
                if (line && !line.includes('CV') && !line.includes('T√™n:') && line.length > 3 && line.length < 50) {
                    if (!name || name === 'T√™n ·ª©ng vi√™n') {
                        name = line.replace(/^H·ªç t√™n:?\s*/i, '').replace(/^T√™n:?\s*/i, '');
                    }
                }
            }
            
            return `
                <div class="agent-cv-preview">
                    <h3 style="color: #00d4aa; margin-bottom: 20px; text-align: center;">ü§ñ CV ƒë∆∞·ª£c t·ªëi ∆∞u b·ªüi AI Agent</h3>
                    
                    <div class="cv-container">
                        <div class="cv-header">
                            <div class="cv-name">${name}</div>
                            <div class="cv-title">${title}</div>
                            <div class="cv-contact">
                                <div class="cv-contact-item">üìû ${contact.phone || 'S·ªë ƒëi·ªán tho·∫°i'}</div>
                                <div class="cv-contact-item">üìß ${contact.email || 'Email'}</div>
                                <div class="cv-contact-item">üìç ${contact.address || 'ƒê·ªãa ch·ªâ'}</div>
                            </div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">üéØ M·ª•c ti√™u ngh·ªÅ nghi·ªáp</div>
                            <div style="color: #555; line-height: 1.8; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #00d4aa;">
                                T√¥i mong mu·ªën ·ª©ng tuy·ªÉn v√†o v·ªã tr√≠ ph√π h·ª£p v·ªõi chuy√™n m√¥n v√† kinh nghi·ªám c·ªßa m√¨nh, 
                                ƒë√≥ng g√≥p v√†o s·ª± ph√°t tri·ªÉn c·ªßa c√¥ng ty v√† ph√°t tri·ªÉn b·∫£n th√¢n trong m√¥i tr∆∞·ªùng chuy√™n nghi·ªáp.
                            </div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">üíº Kinh nghi·ªám l√†m vi·ªác</div>
                            <div class="cv-item">
                                <div class="cv-item-header">
                                    <div>
                                        <div class="cv-item-title">V·ªã tr√≠ c√¥ng vi·ªác</div>
                                        <div class="cv-item-company">T√™n c√¥ng ty</div>
                                    </div>
                                    <div class="cv-item-date">Th·ªùi gian</div>
                                </div>
                                <div class="cv-item-description">
                                    1. M√¥ t·∫£ c√¥ng vi·ªác v√† th√†nh t√≠ch ƒë·∫°t ƒë∆∞·ª£c<br>
                                    2. C√°c d·ª± √°n quan tr·ªçng ƒë√£ tham gia<br>
                                    3. K·ªπ nƒÉng v√† kinh nghi·ªám t√≠ch l≈©y
                                </div>
                            </div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">üéì H·ªçc v·∫•n</div>
                            <div class="cv-item">
                                <div class="cv-item-header">
                                    <div>
                                        <div class="cv-item-title">B·∫±ng c·∫•p / Chuy√™n ng√†nh</div>
                                        <div class="cv-item-company">T√™n tr∆∞·ªùng</div>
                                    </div>
                                    <div class="cv-item-date">NƒÉm t·ªët nghi·ªáp</div>
                                </div>
                            </div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">üõ†Ô∏è K·ªπ nƒÉng</div>
                            <div class="cv-skills-grid">
                                <div class="cv-skill-item">K·ªπ nƒÉng chuy√™n m√¥n</div>
                                <div class="cv-skill-item">K·ªπ nƒÉng m√°y t√≠nh</div>
                                <div class="cv-skill-item">K·ªπ nƒÉng m·ªÅm</div>
                                <div class="cv-skill-item">K·ªπ nƒÉng qu·∫£n l√Ω</div>
                            </div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">üåê Ngo·∫°i ng·ªØ</div>
                            <div class="cv-languages">
                                <div class="cv-language-item">Ti·∫øng Anh - Trung c·∫•p</div>
                                <div class="cv-language-item">Ti·∫øng Nh·∫≠t - C∆° b·∫£n</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(0, 0, 0, 0.2); padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h4 style="color: #00d4aa; margin-bottom: 15px;">üìù N·ªôi dung CV ƒë∆∞·ª£c t·ªëi ∆∞u</h4>
                    <div style="white-space: pre-line; line-height: 1.6; font-family: monospace; color: #e0e0e0;">
                        ${result}
                    </div>
                </div>
            `;
        }

        function formatErrorResult(result) {
            // Parse errors by category
            const lines = result.split('\n');
            let errors = {
                spelling: [],
                format: [],
                content: [],
                professional: []
            };
            
            let currentCategory = '';
            for (let line of lines) {
                const cleanLine = line.trim();
                if (cleanLine.includes('ch√≠nh t·∫£') || cleanLine.includes('ng·ªØ ph√°p')) {
                    currentCategory = 'spelling';
                } else if (cleanLine.includes('ƒë·ªãnh d·∫°ng') || cleanLine.includes('b·ªë c·ª•c')) {
                    currentCategory = 'format';
                } else if (cleanLine.includes('thi·∫øu s√≥t') || cleanLine.includes('n·ªôi dung')) {
                    currentCategory = 'content';
                } else if (cleanLine.includes('chuy√™n nghi·ªáp') || cleanLine.includes('tr√¨nh b√†y')) {
                    currentCategory = 'professional';
                } else if (cleanLine && currentCategory) {
                    const errorText = cleanLine.replace(/^\d+\.?\s*/, '').replace(/^[-*]\s*/, '').trim();
                    if (errorText && errorText.length > 5) {
                        errors[currentCategory].push(errorText);
                    }
                }
            }
            
            return `
                <div class="errors-section">
                    <h3 style="color: #ef4444; margin-bottom: 25px; text-align: center;">üîç Ph√¢n t√≠ch l·ªói CV</h3>
                    
                    <div class="analysis-grid">
                        <div class="error-category">
                            <h4>üìù L·ªói ch√≠nh t·∫£ & Ng·ªØ ph√°p</h4>
                            ${errors.spelling.length > 0 ? 
                                errors.spelling.map(error => `<div class="error-item">${error}</div>`).join('') :
                                '<div class="error-item">Kh√¥ng ph√°t hi·ªán l·ªói ch√≠nh t·∫£</div>'
                            }
                        </div>
                        
                        <div class="error-category">
                            <h4>üé® L·ªói ƒë·ªãnh d·∫°ng & B·ªë c·ª•c</h4>
                            ${errors.format.length > 0 ? 
                                errors.format.map(error => `<div class="error-item">${error}</div>`).join('') :
                                '<div class="error-item">ƒê·ªãnh d·∫°ng CV ·ªïn</div>'
                            }
                        </div>
                        
                        <div class="error-category">
                            <h4>üìã N·ªôi dung thi·∫øu s√≥t</h4>
                            ${errors.content.length > 0 ? 
                                errors.content.map(error => `<div class="error-item">${error}</div>`).join('') :
                                '<div class="error-item">N·ªôi dung ƒë·∫ßy ƒë·ªß</div>'
                            }
                        </div>
                        
                        <div class="error-category">
                            <h4>üíº T√≠nh chuy√™n nghi·ªáp</h4>
                            ${errors.professional.length > 0 ? 
                                errors.professional.map(error => `<div class="error-item">${error}</div>`).join('') :
                                '<div class="error-item">Tr√¨nh b√†y chuy√™n nghi·ªáp</div>'
                            }
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(0, 0, 0, 0.2); padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h4 style="color: #ef4444; margin-bottom: 15px;">ÔøΩ B√°o c√°o chi ti·∫øt</h4>
                    <div style="white-space: pre-line; line-height: 1.6; color: #e0e0e0;">
                        ${result}
                    </div>
                </div>
            `;
        }

        function formatGeneralResult(result) {
            // Parse comprehensive analysis
            const lines = result.split('\n');
            let sections = {
                overview: [],
                details: [],
                market: [],
                recommendations: [],
                positions: []
            };
            
            let currentSection = '';
            for (let line of lines) {
                const cleanLine = line.trim();
                if (cleanLine.includes('t·ªïng quan') || cleanLine.includes('ƒë√°nh gi√° chung')) {
                    currentSection = 'overview';
                } else if (cleanLine.includes('chi ti·∫øt') || cleanLine.includes('ph√¢n t√≠ch t·ª´ng ph·∫ßn')) {
                    currentSection = 'details';
                } else if (cleanLine.includes('th·ªã tr∆∞·ªùng') || cleanLine.includes('ti√™u chu·∫©n')) {
                    currentSection = 'market';
                } else if (cleanLine.includes('c·∫£i thi·ªán') || cleanLine.includes('l·ªô tr√¨nh')) {
                    currentSection = 'recommendations';
                } else if (cleanLine.includes('v·ªã tr√≠') || cleanLine.includes('c√¥ng vi·ªác ph√π h·ª£p')) {
                    currentSection = 'positions';
                } else if (cleanLine && currentSection) {
                    const text = cleanLine.replace(/^\d+\.?\s*/, '').replace(/^[-*]\s*/, '').trim();
                    if (text && text.length > 10) {
                        sections[currentSection].push(text);
                    }
                }
            }
            
            return `
                <div class="analysis-summary">
                    <h3 style="margin-bottom: 25px; text-align: center;">üìà Ph√¢n t√≠ch CV to√†n di·ªán</h3>
                    
                    <div class="analysis-grid">
                        <div class="analysis-card">
                            <h4>üéØ ƒê√°nh gi√° t·ªïng quan</h4>
                            <div style="color: #e0e0e0; line-height: 1.8;">
                                ${sections.overview.length > 0 ? 
                                    sections.overview.map((item, index) => `<p>${index + 1}. ${item}</p>`).join('') :
                                    '<p>1. CV c√≥ c·∫•u tr√∫c c∆° b·∫£n v√† c·∫ßn ƒë∆∞·ª£c c·∫£i thi·ªán ƒë·ªÉ tƒÉng t√≠nh c·∫°nh tranh.</p>'
                                }
                            </div>
                        </div>
                        
                        <div class="analysis-card">
                            <h4>üîç Ph√¢n t√≠ch chi ti·∫øt</h4>
                            <div style="color: #e0e0e0; line-height: 1.8;">
                                ${sections.details.length > 0 ? 
                                    sections.details.map((item, index) => `<p>a. ${item}</p>`).join('') :
                                    '<p>a. C√°c ph·∫ßn trong CV c·∫ßn ƒë∆∞·ª£c xem x√©t v√† t·ªëi ∆∞u h√≥a.</p>'
                                }
                            </div>
                        </div>
                        
                        <div class="analysis-card">
                            <h4>üìä So s√°nh th·ªã tr∆∞·ªùng</h4>
                            <div style="color: #e0e0e0; line-height: 1.8;">
                                ${sections.market.length > 0 ? 
                                    sections.market.map((item, index) => `<p>${String.fromCharCode(97 + index)}. ${item}</p>`).join('') :
                                    '<p>a. CV c·∫ßn ƒë∆∞·ª£c c·∫£i thi·ªán ƒë·ªÉ ƒë√°p ·ª©ng ti√™u chu·∫©n th·ªã tr∆∞·ªùng hi·ªán t·∫°i.</p>'
                                }
                            </div>
                        </div>
                        
                        <div class="analysis-card">
                            <h4>üöÄ L·ªô tr√¨nh c·∫£i thi·ªán</h4>
                            <ul class="improvements-list">
                                ${sections.recommendations.length > 0 ? 
                                    sections.recommendations.map((item, index) => `<li>${String.fromCharCode(97 + index)}. ${item}</li>`).join('') :
                                    '<li>a. C·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n</li><li>b. C·∫£i thi·ªán m√¥ t·∫£ kinh nghi·ªám</li><li>c. B·ªï sung k·ªπ nƒÉng relevant</li>'
                                }
                            </ul>
                        </div>
                        
                        <div class="analysis-card">
                            <h4>üíº V·ªã tr√≠ ph√π h·ª£p</h4>
                            <div style="color: #e0e0e0; line-height: 1.8;">
                                ${sections.positions.length > 0 ? 
                                    sections.positions.map((item, index) => `<p>${index + 1}. ${item}</p>`).join('') :
                                    '<p>1. C√°c v·ªã tr√≠ entry-level trong lƒ©nh v·ª±c t∆∞∆°ng ·ª©ng</p><p>2. Th·ª±c t·∫≠p sinh ho·∫∑c nh√¢n vi√™n m·ªõi</p>'
                                }
                            </div>
                        </div>
                        
                        <div class="analysis-card">
                            <h4>üìà D·ª± ƒëo√°n th√†nh c√¥ng</h4>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: #ffd700; margin: 15px 0;">‚≠ê‚≠ê‚≠ê</div>
                                <p style="color: #e0e0e0;">Kh·∫£ nƒÉng trung b√¨nh</p>
                                <p style="font-size: 0.9rem; color: #b0b0b0; margin-top: 10px;">
                                    C·∫ßn c·∫£i thi·ªán ƒë·ªÉ tƒÉng c∆° h·ªôi ƒë∆∞·ª£c tuy·ªÉn d·ª•ng
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(0, 0, 0, 0.2); padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h4 style="color: #00d4aa; margin-bottom: 15px;">üìÑ B√°o c√°o ph√¢n t√≠ch ƒë·∫ßy ƒë·ªß</h4>
                    <div style="white-space: pre-line; line-height: 1.6; color: #e0e0e0;">
                        ${result}
                    </div>
                </div>
            `;
        }

        function showLoading() {
            analysisResult.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>ƒêang ph√¢n t√≠ch CV v·ªõi AI...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
            `;
            
            // Simulate progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) progress = 90;
                
                const progressFill = document.querySelector('.progress-fill');
                if (progressFill) {
                    progressFill.style.width = progress + '%';
                }
                
                if (progress >= 90) {
                    clearInterval(progressInterval);
                }
            }, 500);
        }

        function hideLoading() {
            const loadingElement = document.querySelector('.loading');
            if (loadingElement) {
                loadingElement.remove();
            }
        }

        function showError(message) {
            analysisResult.innerHTML = `
                <div class="error-message">
                    <h3>‚ùå L·ªói</h3>
                    <p>${message}</p>
                </div>
            `;
        }

        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `
                <h3>‚úÖ Th√†nh c√¥ng</h3>
                <p>${message}</p>
            `;
            
            analysisResult.insertBefore(successDiv, analysisResult.firstChild);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            
            // Add some welcome animation
            setTimeout(() => {
                const header = document.querySelector('.header');
                if (header) {
                    header.style.transform = 'translateY(0)';
                    header.style.opacity = '1';
                }
            }, 300);
        });

        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'o') {
                    e.preventDefault();
                    fileInput.click();
                }
                if (e.key === 'Enter') {
                    e.preventDefault();
                    if (!analyzeBtn.disabled) {
                        analyzeCV();
                    }
                }
            }
        });

        // Add responsive handling
        window.addEventListener('resize', function() {
            // Adjust layout for mobile devices
            const mainContent = document.querySelector('.main-content');
            if (window.innerWidth <= 768) {
                mainContent.style.gridTemplateColumns = '1fr';
            } else {
                mainContent.style.gridTemplateColumns = '400px 1fr';
            }
        });
    </script>
</body>
</html>
 